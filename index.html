<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
    <script>
        // Паттерны проектирования
        // State
        class OrderStatus {
            constructor(name, nextStatus){
                this.name = name;
                this.nextStatus = nextStatus;
            }
            next(){
                return new this.nextStatus();
            }
        }
        // steps delivered
        class WaitingForPayment extends OrderStatus {
            constructor(){
                super('waitingForPayment', Shipping);
            }
        }
        class Shipping extends OrderStatus {
            constructor(){
                super('shipping', Delivired);
            }
        }
        class Delivired extends OrderStatus {
            constructor(){
                super('delivired', Delivired);
            }
        }
        class Order {
            constructor(){
                this.state = new WaitingForPayment();
            }
            nextState(){
                this.state = this.state.next();
            }
            cancelOrder(){
                this.state.name === 'waitingForPayment' 
                    ? console.log('Order is canceled')
                    : console.log('Order can not be canceled')
            }
        }
        // --
        const myOrder = new Order();
        console.log(myOrder.state.name);    // waitingForPayment
        // myOrder.cancelOrder();
        myOrder.nextState();
        console.log(myOrder.state.name);    // shipping
        myOrder.nextState();
        console.log(myOrder.state.name);    // delivired
        // Try cancel order
        myOrder.cancelOrder();
    </script>
</html>